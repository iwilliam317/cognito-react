(this["webpackJsonpcognito-react-example"]=this["webpackJsonpcognito-react-example"]||[]).push([[0],{126:function(e,t,n){e.exports=n(583)},131:function(e,t,n){},133:function(e,t,n){},15:function(e){e.exports=JSON.parse('{"cognito":{"REGION":"eu-west-1","USER_POOL_ID":"eu-west-1_BEPu6M68O","IDENTITY_POOL_ID":"eu-west-1:5473ad9d-f3d7-4f56-a7e8-27158041c822","APP_CLIENT_ID":"10u3l67s1rk6sn12q8mpn0216t"},"api":{"URL":"https://nln2918f2h.execute-api.eu-west-1.amazonaws.com/dev/testquotaandcognito","KEY":"5NHj3Bgj3s8AWw3FOeDYa6o53dPhgk90abDEjQ02","HASH_ID_TOKEN":"CognitoIdentityServiceProvider.10u3l67s1rk6sn12q8mpn0216t"}}')},40:function(e,t){},583:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),s=n(99),c=n.n(s),o=(n(131),n(8)),i=n.n(o),u=n(119),l=n(25),p=n(100),d=n(101),m=n(102),h=n(118),f=n(120),v=(n(133),n(117)),g=n(103),k=n.n(g),y=n(104),E=n.n(y),b=n(15),w=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",bucket:"",user:{},files:[],apiGatewayResponse:"",error:{message:null,code:null,name:null},isAuthenticated:!1},e.handleChange=function(t){e.setState(Object(p.a)({},t.target.id,t.target.value))},e.clearState=function(){e.setState({error:{message:null,code:null,name:null},files:[],apiGatewayResponse:""})},e.signIn=function(){var t=Object(l.a)(i.a.mark((function t(n){var a,r,s,c,o,l,p,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e.clearState(),t.prev=2,a=e.state,r=a.username,s=a.password,t.next=6,v.a.signIn(r,s);case 6:return c=t.sent,t.next=9,v.a.currentCredentials();case 9:o=t.sent,l=o.accessKeyId,p=o.secretAccessKey,d=o.sessionToken,Object(u.a)(o,["accessKeyId","secretAccessKey","sessionToken"]),e.setState({isAuthenticated:!0,user:c.attributes,accessKeyId:l,secretAccessKey:p,sessionToken:d}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),e.setState({error:t.t0});case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}(),e.signOut=function(){var t=Object(l.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault();try{v.a.signOut(),e.setState({isAuthenticated:!1,user:{},password:""})}catch(a){e.setState({error:a})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.listObjects=function(){var t=Object(l.a)(i.a.mark((function t(n){var a,r,s,c,o,u,l,p,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e.clearState(),a=e.state,r=a.accessKeyId,s=a.secretAccessKey,c=a.sessionToken,o=new k.a.S3({accessKeyId:r,sessionToken:c,secretAccessKey:s}),u=e.state.bucket,l={Bucket:u},t.prev=6,t.next=9,o.listObjects(l).promise();case 9:p=t.sent,d=p.Contents,e.setState({files:d}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),e.setState({error:t.t0});case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e){return t.apply(this,arguments)}}(),e.checkCurrentSession=Object(l.a)(i.a.mark((function t(){var n,a,r,s,c,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.currentSession();case 3:if(!(n=t.sent)){t.next=16;break}return t.next=7,v.a.currentCredentials();case 7:return a=t.sent,r=a.accessKeyId,s=a.secretAccessKey,c=a.sessionToken,t.next=13,v.a.currentUserInfo();case 13:o=t.sent,u=n.getIdToken().getJwtToken(),e.setState({isAuthenticated:!0,accessKeyId:r,secretAccessKey:s,sessionToken:c,user:o.attributes,username:o.username,idToken:u});case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),e.setState({error:t.t0});case 21:case"end":return t.stop()}}),t,null,[[0,18]])}))),e.checkApiCognitoAuthorizer=function(){var t=Object(l.a)(i.a.mark((function t(n){var a,r,s,c,o,u,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.clearState(),t.prev=2,a=e.state.idToken,r=b.api,s=r.KEY,c=r.URL,!a||!s){t.next=13;break}return o={message:"hello world"},u={headers:{authorization:a,"x-api-key":s}},t.next=11,E.a.post(c,o,u);case 11:l=t.sent,e.setState({apiGatewayResponse:JSON.stringify(l.data)});case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0),e.setState({error:t.t0});case 19:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){console.log("step componentDidMount"),this.checkCurrentSession()}},{key:"render",value:function(){console.log("step render");var e=this.handleChange,t=this.signIn,n=this.listObjects,a=this.signOut,s=this.checkApiCognitoAuthorizer,c=this.state,o=c.username,i=c.password,u=c.isAuthenticated,l=c.bucket,p=c.error,d=(c.user,c.files),m=c.apiGatewayResponse;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},u?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Hello ",r.a.createElement("strong",null,o))," ",r.a.createElement("button",{onClick:a},"Sign Out"),r.a.createElement("div",{id:"div-s3"},r.a.createElement("h3",null,"S3"),r.a.createElement("input",{id:"bucket",value:l,onChange:e,placeholder:"Type the bucket name"}),r.a.createElement("button",{onClick:n},"List Files"),r.a.createElement("div",null,r.a.createElement("ul",null,d.map((function(e,t){return r.a.createElement("li",{key:t},e.Key)}))))),r.a.createElement("div",{id:"div-api-gateway"},r.a.createElement("h3",null,"Api Gateway"),r.a.createElement("button",{onClick:s},"Test Api Gateway"),m)):r.a.createElement("form",{onSubmit:t},r.a.createElement("h1",null,"Cognito - React "),r.a.createElement("div",null,r.a.createElement("input",{id:"username",onChange:e,value:o,placeholder:"type your email/username"})),r.a.createElement("div",null,r.a.createElement("input",{id:"password",type:"password",onChange:e,value:i,placeholder:"type your password"})),r.a.createElement("button",null,"Sign in")),r.a.createElement("div",null,p.message)))}}]),n}(a.Component);n(43).default.configure({region:b.cognito.REGION,userPoolId:b.cognito.USER_POOL_ID,userPoolWebClientId:b.cognito.APP_CLIENT_ID,identityPoolId:b.cognito.IDENTITY_POOL_ID}),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[126,1,2]]]);
//# sourceMappingURL=main.f5b8c45a.chunk.js.map